# Exemplo de variáveis de ambiente (DEV/PROD)
# Copie para `backend/.env` (produção) e/ou `backend/.env.local` (somente no seu PC).
#
# Observação:
# - O servidor considera PRODUÇÃO apenas quando `NODE_ENV=production`.
# - Qualquer outro valor (ou ausência) é tratado como desenvolvimento.

# -----------------------------
# Ambiente / CORS
# -----------------------------
NODE_ENV=development

# URL base p£blica do site (PROD): https://www.paytech.app.br
# Use para documenta‡Æo/integra‡äes externas; o painel/admin normalmente usam API_BASE_URL="/api" (mesma origem).
BASE_URL=""

# Em PRODUÇÃO: liste as origens permitidas (separadas por vírgula).
# Ex.: APP_URL="https://paytech.app.br,https://www.paytech.app.br"
#
# Dica: para rodar local com Live Server, use NODE_ENV=development.
# Se você insistir em rodar com NODE_ENV=production localmente, inclua a origem no APP_URL:
#   APP_URL="http://127.0.0.1:5500" ou (wildcard só para localhost) APP_URL="http://127.0.0.1:*"
APP_URL=""

# -----------------------------
# API
# -----------------------------
PORT=3333
SERVE_WEB=true

# URL p£blica da API (PROD). Usada para montar links (reset/admin) e payloads de QR/pairing.
# Recomendado em produ‡Æo:
# API_URL="https://www.paytech.app.br"
# API_PUBLIC_URL="https://www.paytech.app.br"
API_URL=""
API_PUBLIC_URL=""

# Produ‡Æo (opcional): atr s de proxy com TLS, rejeita HTTP (usa X-Forwarded-Proto).
REQUIRE_HTTPS=false

DATABASE_URL="postgresql://USER:PASS@HOST:5432/DB?sslmode=disable"

# JWT (obrigatório)
JWT_SECRET="troque_este_valor"
JWT_EXPIRES_IN="12h"

# Admin (SuperDono) - recomendado usar secreto separado
ADMIN_JWT_SECRET="troque_este_valor_admin"
ADMIN_JWT_EXPIRES_IN="7d"

# Bootstrap seguro (cria o PRIMEIRO SUPER_ADMIN apenas quando ainda nao existe nenhum admin)
# Requer header: X-Bootstrap-Token
ADMIN_BOOTSTRAP_TOKEN=""

# Reset de senha do Admin (Portal do SuperDono)
# URL pública da página `admin/reset-password.html` (sem token).
# Se vazio, usa API_URL + "/admin/reset-password.html" quando API_URL estiver definido.
ADMIN_WEB_RESET_URL=""
ADMIN_RESET_TOKEN_TTL_HOURS=24

# SuperAdmin (garantir acesso ao /admin no startup)
SUPERADMIN_EMAIL=""
SUPERADMIN_PASSWORD=""
SUPERADMIN_NAME="SuperDono"

# Compatibilidade (antigo seed)
ADMIN_EMAIL=""
ADMIN_PASSWORD=""
ADMIN_NAME="SuperDono"

# DEV-only: rota /api/admin/dev/bootstrap (usa env, nao loga senha/hash)
ADMIN_BOOTSTRAP_EMAIL=""
ADMIN_BOOTSTRAP_PASSWORD=""

# DEV-only: rotas /api/dev/reset e /api/dev/seed
# Requer header: x-dev-reset-token
DEV_RESET_TOKEN=""

# Seed manual do SuperAdmin (recomendado)
ADMIN_SEED_EMAIL=""
ADMIN_SEED_PASSWORD=""

# bcrypt cost (default: 10)
BCRYPT_SALT_ROUNDS=10

# Billing sweep (ms) - opcional (default: 5 min)
# BILLING_SWEEP_INTERVAL_MS=300000

# Senha mínima (opcional). Default: 6 (compatibilidade).
PASSWORD_MIN_LENGTH=8

# -----------------------------
# Login com Google (OAuth)
# -----------------------------
# Crie um OAuth Client ID (Web) no Google Cloud Console e informe aqui.
# O painel carrega automaticamente via `GET /api/config/public` (sem hardcode).
GOOGLE_CLIENT_ID=""

# -----------------------------
# Reset de senha (e-mail)
# -----------------------------
# URL pública para a página `reset-password.html` (sem token).
#
# DEV (Live Server): http://127.0.0.1:5500/backend/public/reset-password.html
# PROD (Nginx/Apache): https://seu-dominio.com/reset-password.html
WEB_RESET_URL=""

# -----------------------------
# Verificação de e-mail
# -----------------------------
# URL pública para a página `verify-email.html` (sem token).
#
# DEV (Live Server): http://127.0.0.1:5500/backend/public/verify-email.html
# PROD (Nginx/Apache): https://seu-dominio.com/verify-email.html
WEB_VERIFY_URL=""

# Tempo de expiração do link (em horas). Default: 24 (min 1 / max 168)
EMAIL_VERIFY_TTL_HOURS=24

# Configure SMTP_* para envio real de e-mails.
SMTP_HOST=""
SMTP_PORT=587
SMTP_USER=""
SMTP_PASS=""
SMTP_FROM="PDV <no-reply@seu-dominio.com>"
SMTP_FROM_NAME=""
SMTP_FROM_EMAIL=""

# Se não definido, usa `true` apenas quando PORT=465.
# SMTP_SECURE=true|false
SMTP_SECURE=false

# Timeout SMTP (ms)
SMTP_TIMEOUT_MS=10000

# Opcional: faz um SMTP verify() no startup (apenas logs; não bloqueia o servidor)
SMTP_VERIFY_ON_START=false

# Admin (Portal): e-mails e templates
# DEV_MODE_EMAIL=log => não envia (apenas console) e marca como DEV_LOG
DEV_MODE_EMAIL=""
SUPPORT_EMAIL="suporte@paytech.app.br"
ADMIN_PORTAL_URL="http://127.0.0.1:3333/admin"
ADMIN_EMAIL_MAX_PER_MERCHANT_PER_DAY=5
ADMIN_EMAIL_MAX_PER_ADMIN_PER_HOUR=40
EMAIL_TEMPLATES_SEED=true
